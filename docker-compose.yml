version: '3.7'

services:
  jupyter:
    image: tensorflow/tensorflow:latest-gpu-jupyter
    volumes:
      - ./jupyter-notebooks:/notebook
      - ./data-sets:/data-sets
      - ./pickled-data:/pickled-data
      - ./tensorboard-logs:/tensorboard-logs
    command: jupyter notebook /notebook --port=8888 --ip=0.0.0.0 --allow-root
    ports:
      - "8888:8888"
      - "6006:6006"
    deploy:
      resources:
        limits:
          cpus: 8
          memory: 12gb
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [ compute, utility ]